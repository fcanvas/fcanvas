import type { Canvas } from "canvas"

import { CANVAS_ELEMENT, Circle, Layer, Stage } from "./"

describe("index", () => {
  test("should render", () => {
    const stage = new Stage()

    const layer = new Layer()
    stage.add(layer)

    const circle = new Circle({
      x: 0,
      y: 0,
      radius: 50,
      stroke: "#fff",
      fill: "red"
    })
    layer.add(circle)
    layer.draw()

    expect((layer[CANVAS_ELEMENT] as unknown as Canvas).toDataURL()).toBe(
      "data:image/png;base64,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"
    )
  })
})
